<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Immersive VR/AR Video Experience</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Orbitron', monospace;
background: linear-gradient(135deg, #0a0a23, #1a1a3e, #2d1b69);
overflow: hidden;
position: relative;
}

/* Animated background particles */
.particles {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: 1;
}

.particle {
position: absolute;
background: rgba(64, 224, 255, 0.6);
border-radius: 50%;
animation: float 6s ease-in-out infinite;
}

@keyframes float {
0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
50% { transform: translateY(-20px) rotate(180deg); opacity: 0.8; }
}

/* Main UI Panel */
#mainPanel {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
z-index: 999;
background: linear-gradient(145deg, rgba(15, 15, 40, 0.95), rgba(30, 30, 60, 0.95));
backdrop-filter: blur(20px);
border: 2px solid rgba(64, 224, 255, 0.3);
border-radius: 20px;
padding: 40px;
box-shadow: 
0 20px 40px rgba(0, 0, 0, 0.5),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
transition: all 0.3s ease;
text-align: center;
min-width: 400px;
}

#mainPanel.hidden {
opacity: 0;
transform: translate(-50%, -50%) scale(0.8);
pointer-events: none;
}

.logo {
font-size: 2.5rem;
font-weight: 900;
color: #40e0ff;
text-shadow: 0 0 20px rgba(64, 224, 255, 0.5);
margin-bottom: 10px;
letter-spacing: 2px;
}

.tagline {
color: rgba(255, 255, 255, 0.8);
font-size: 1rem;
margin-bottom: 30px;
font-weight: 400;
}

/* File Upload */
.upload-zone {
position: relative;
margin-bottom: 25px;
}

.file-input {
display: none;
}

.upload-btn {
display: block;
width: 100%;
padding: 20px;
background: linear-gradient(145deg, #40e0ff, #0099cc);
border: none;
border-radius: 15px;
color: white;
font-family: 'Orbitron', monospace;
font-weight: 700;
font-size: 1.1rem;
cursor: pointer;
transition: all 0.3s ease;
text-transform: uppercase;
letter-spacing: 1px;
box-shadow: 0 10px 30px rgba(64, 224, 255, 0.3);
}

.upload-btn:hover {
transform: translateY(-3px);
box-shadow: 0 15px 40px rgba(64, 224, 255, 0.4);
background: linear-gradient(145deg, #50f0ff, #00aadd);
}

.status-text {
color: rgba(255, 255, 255, 0.6);
font-size: 0.8rem;
margin-top: 15px;
line-height: 1.4;
}

/* VR Controls Panel */
#vrControls {
position: fixed;
bottom: 30px;
left: 50%;
transform: translateX(-50%);
z-index: 998;
background: rgba(15, 15, 40, 0.9);
backdrop-filter: blur(15px);
border: 1px solid rgba(64, 224, 255, 0.3);
border-radius: 50px;
padding: 15px 25px;
display: none;
gap: 20px;
align-items: center;
}

.vr-btn {
width: 50px;
height: 50px;
border: 2px solid rgba(64, 224, 255, 0.5);
border-radius: 50%;
background: linear-gradient(145deg, rgba(30, 30, 60, 0.8), rgba(50, 50, 90, 0.8));
color: #40e0ff;
cursor: pointer;
font-size: 1.2rem;
font-weight: bold;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
}

.vr-btn:hover {
border-color: #40e0ff;
background: linear-gradient(145deg, rgba(64, 224, 255, 0.2), rgba(64, 224, 255, 0.1));
transform: scale(1.1);
box-shadow: 0 0 20px rgba(64, 224, 255, 0.4);
}

/* Loading Animation */
.loading-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(10, 10, 35, 0.95);
z-index: 1000;
display: none;
align-items: center;
justify-content: center;
flex-direction: column;
}

.loading-spinner {
width: 80px;
height: 80px;
border: 4px solid rgba(64, 224, 255, 0.2);
border-top: 4px solid #40e0ff;
border-radius: 50%;
animation: spin 1s linear infinite;
box-shadow: 0 0 30px rgba(64, 224, 255, 0.3);
}

.loading-text {
color: #40e0ff;
font-family: 'Orbitron', monospace;
font-weight: 700;
font-size: 1.2rem;
margin-top: 20px;
text-align: center;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
#mainPanel {
min-width: 90%;
padding: 30px 20px;
}

.logo {
font-size: 2rem;
}

#vrControls {
bottom: 15px;
padding: 10px 15px;
                gap: 15px;
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
}

.vr-btn {
width: 40px;
height: 40px;
                font-size: 1rem;
                font-size: 0.9rem;
}
}

@media (max-width: 480px) {
#mainPanel {
min-width: 95%;
padding: 25px 15px;
}

.logo {
font-size: 1.8rem;
}

.upload-btn {
padding: 15px;
font-size: 1rem;
}

#vrControls {
bottom: 10px;
                padding: 8px 12px;
                gap: 10px;
                padding: 8px 10px;
                gap: 8px;
                flex-wrap: wrap;
                justify-content: center;
}

.vr-btn {
width: 35px;
height: 35px;
                font-size: 0.9rem;
                font-size: 0.8rem;
}
}

/* VR Scene Enhancements */
a-scene {
background: radial-gradient(circle at center, #1a1a3e 0%, #0a0a23 100%);
}
</style>
</head>
<body>
<!-- Animated Background -->
<div class="particles" id="particles"></div>

<!-- Main Control Panel -->
<div id="mainPanel">
<div class="logo">‚ö° NEXUS VR</div>
<div class="tagline">Immersive Theater Experience</div>

<div class="upload-zone">
<input type="file" id="videoFile" class="file-input" accept="video/*" />
<label for="videoFile" class="upload-btn">
üì° UPLOAD MEDIA FILE
</label>
</div>

<div class="status-text">
Your video will be enhanced with immersive Theater VR environment.<br>
Supports: MP4, WebM, MOV, AVI formats
</div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
<div class="loading-spinner"></div>
<div class="loading-text">INITIALIZING VR THEATER...</div>
</div>

<!-- VR Scene -->
<a-scene vr-mode-ui="enabled: true" background="color: #0a0a23" device-orientation-permission-ui="enabled: false">
<a-assets>
<!-- Assets will be added dynamically -->
</a-assets>

<!-- Environment Setup -->
<a-sky id="skybox" color="#0a0a23"></a-sky>

<!-- Ambient lighting -->
<a-light type="ambient" color="#404040" intensity="0.4"></a-light>
<a-light type="directional" position="0 10 5" color="#40e0ff" intensity="0.3"></a-light>

<!-- Main Video Screen - Responsive sizing -->
<a-video
id="videoScreen"
width="16"
height="9"
position="0 2 -8"
rotation="0 0 0"
src=""
material="shader: flat"
></a-video>

<!-- Theater Environment -->
<a-entity id="theaterElements">
<!-- Floor -->
<a-plane 
position="0 -1 0" 
rotation="-90 0 0" 
width="30" 
height="30" 
color="#1a1a3e" 
material="roughness: 0.8">
</a-plane>

<!-- Side walls with glow -->
<a-box position="-12 3 -8" width="2" height="8" depth="20" color="#2d1b69" material="emissive: #40e0ff; emissiveIntensity: 0.1"></a-box>
<a-box position="12 3 -8" width="2" height="8" depth="20" color="#2d1b69" material="emissive: #40e0ff; emissiveIntensity: 0.1"></a-box>

<!-- Theater seats -->
<a-entity id="seats">
<!-- Row 1 -->
<a-box position="-3 0.5 2" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="-1 0.5 2" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="1 0.5 2" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="3 0.5 2" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>

<!-- Row 2 -->
<a-box position="-3 0.5 4" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="-1 0.5 4" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="1 0.5 4" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
<a-box position="3 0.5 4" width="1" height="1" depth="0.8" color="#2d1b69"></a-box>
</a-entity>
</a-entity>

<!-- Floating particles for ambiance -->
<a-entity id="ambientParticles">
<a-sphere position="5 4 -3" radius="0.1" color="#40e0ff" material="emissive: #40e0ff; emissiveIntensity: 0.5">
<a-animation attribute="position" to="5 6 -3" direction="alternate" repeat="indefinite" dur="3000"></a-animation>
</a-sphere>
<a-sphere position="-7 3 -5" radius="0.08" color="#40e0ff" material="emissive: #40e0ff; emissiveIntensity: 0.3">
<a-animation attribute="position" to="-7 5 -5" direction="alternate" repeat="indefinite" dur="4000"></a-animation>
</a-sphere>
<a-sphere position="3 5 -12" radius="0.12" color="#40e0ff" material="emissive: #40e0ff; emissiveIntensity: 0.4">
<a-animation attribute="position" to="3 7 -12" direction="alternate" repeat="indefinite" dur="3500"></a-animation>
</a-sphere>
</a-entity>

<!-- Camera with enhanced controls and device responsiveness -->
<a-entity 
camera 
look-controls="pointerLockEnabled: true; touchEnabled: true" 
wasd-controls="acceleration: 20"
position="0 1.6 0">

<!-- VR Cursor -->
<a-entity
cursor="fuse: true; fuseTimeout: 1000"
position="0 0 -1"
geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
material="color: #40e0ff; shader: flat; opacity: 0.8"
animation__mouseenter="property: scale; to: 1.5 1.5 1.5; startEvents: mouseenter; dur: 150"
animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 150">
</a-entity>
</a-entity>
</a-scene>

<!-- VR Control Panel -->
<div id="vrControls">
<button class="vr-btn" id="playBtn" title="Play">‚ñ∂</button>
<button class="vr-btn" id="pauseBtn" title="Pause">‚è∏</button>
<button class="vr-btn" id="stopBtn" title="Stop">‚èπ</button>
<button class="vr-btn" id="fullscreenBtn" title="Fullscreen">‚õ∂</button>
</div>

<script>
// Device detection and responsive settings
function getDeviceType() {
const userAgent = navigator.userAgent;
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
const isTablet = /iPad|Android(?=.*Mobile)/i.test(userAgent);

return {
isMobile: isMobile && !isTablet,
isTablet: isTablet,
isDesktop: !isMobile
};
}

// Adjust VR scene based on device
function adjustForDevice() {
const device = getDeviceType();
const videoScreen = document.getElementById('videoScreen');
const camera = document.querySelector('[camera]');

if (device.isMobile) {
// Mobile optimizations
videoScreen.setAttribute('width', '12');
videoScreen.setAttribute('height', '7');
videoScreen.setAttribute('position', '0 2 -6');
camera.setAttribute('position', '0 1.2 0');

// Enable touch controls
camera.setAttribute('look-controls', 'pointerLockEnabled: false; touchEnabled: true');

} else if (device.isTablet) {
// Tablet optimizations
videoScreen.setAttribute('width', '14');
videoScreen.setAttribute('height', '8');
videoScreen.setAttribute('position', '0 2 -7');
camera.setAttribute('position', '0 1.4 0');

} else {
// Desktop settings (default)
videoScreen.setAttribute('width', '16');
videoScreen.setAttribute('height', '9');
videoScreen.setAttribute('position', '0 2 -8');
camera.setAttribute('position', '0 1.6 0');
}
}

// Initialize particles background
function createParticles() {
const particlesContainer = document.getElementById('particles');
const particleCount = getDeviceType().isMobile ? 30 : 50; // Fewer particles on mobile

for (let i = 0; i < particleCount; i++) {
const particle = document.createElement('div');
particle.className = 'particle';
particle.style.left = Math.random() * 100 + '%';
particle.style.top = Math.random() * 100 + '%';
particle.style.width = particle.style.height = (Math.random() * 4 + 2) + 'px';
particle.style.animationDelay = Math.random() * 6 + 's';
particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
particlesContainer.appendChild(particle);
}
}

// File upload handling
const fileInput = document.getElementById('videoFile');
const mainPanel = document.getElementById('mainPanel');
const loadingOverlay = document.getElementById('loadingOverlay');
const vrControls = document.getElementById('vrControls');
let currentVideo = null;

fileInput.addEventListener('change', (event) => {
const file = event.target.files[0];
if (file) {
loadVideo(file);
}
});

function loadVideo(file) {
// Show loading
loadingOverlay.style.display = 'flex';
mainPanel.classList.add('hidden');

setTimeout(() => {
const videoURL = URL.createObjectURL(file);
const assetItemId = 'uploaded-video';

// Create video asset
let assets = document.querySelector('a-assets');
if (!assets) {
assets = document.createElement('a-assets');
document.querySelector('a-scene').appendChild(assets);
}

// Remove existing video if any
const existingVideo = document.getElementById(assetItemId);
if (existingVideo) {
existingVideo.remove();
}

const videoElement = document.createElement('video');
videoElement.setAttribute('id', assetItemId);
videoElement.setAttribute('src', videoURL);
videoElement.setAttribute('autoplay', true);
videoElement.setAttribute('loop', true);
videoElement.setAttribute('crossorigin', 'anonymous');
videoElement.setAttribute('playsinline', '');
videoElement.setAttribute('webkit-playsinline', '');
videoElement.setAttribute('controls', false);

// Adjust video quality based on device
const device = getDeviceType();
if (device.isMobile) {
videoElement.setAttribute('preload', 'metadata'); // Save bandwidth on mobile
} else {
videoElement.setAttribute('preload', 'auto');
}

assets.appendChild(videoElement);

// Apply to video screen
const aVideo = document.querySelector('#videoScreen');
aVideo.setAttribute('src', `#${assetItemId}`);
aVideo.setAttribute('material', 'shader: flat');

currentVideo = videoElement;

// Adjust scene for device
adjustForDevice();

                // Reset zoom level when new video loads
                currentZoomLevel = 1.0;
                
// Hide loading and show controls
setTimeout(() => {
loadingOverlay.style.display = 'none';
vrControls.style.display = 'flex';

// Auto-enter VR mode on mobile if supported
if (device.isMobile && document.querySelector('a-scene').enterVR) {
setTimeout(() => {
document.querySelector('a-scene').enterVR();
}, 1000);
}
}, 1000);

}, 1500);
}

        // Zoom functionality
        let currentZoomLevel = 1.0;
        const minZoom = 0.3;
        const maxZoom = 2.0;
        const zoomStep = 0.2;

        function updateVideoScale(scale) {
            const videoScreen = document.getElementById('videoScreen');
            videoScreen.setAttribute('scale', `${scale} ${scale} ${scale}`);
            currentZoomLevel = scale;
        }

// VR Controls
document.getElementById('playBtn').addEventListener('click', () => {
if (currentVideo) currentVideo.play();
});

document.getElementById('pauseBtn').addEventListener('click', () => {
if (currentVideo) currentVideo.pause();
});

document.getElementById('stopBtn').addEventListener('click', () => {
if (currentVideo) {
currentVideo.pause();
currentVideo.currentTime = 0;
}
});

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
            if (currentZoomLevel > minZoom) {
                const newZoom = Math.max(minZoom, currentZoomLevel - zoomStep);
                updateVideoScale(newZoom);
            }
        });

        document.getElementById('zoomInBtn').addEventListener('click', () => {
            if (currentZoomLevel < maxZoom) {
                const newZoom = Math.min(maxZoom, currentZoomLevel + zoomStep);
                updateVideoScale(newZoom);
            }
        });

document.getElementById('fullscreenBtn').addEventListener('click', () => {
const scene = document.querySelector('a-scene');
if (scene.requestFullscreen) {
scene.requestFullscreen();
} else if (scene.webkitRequestFullscreen) {
scene.webkitRequestFullscreen();
} else if (scene.mozRequestFullScreen) {
scene.mozRequestFullScreen();
}
});

// Handle orientation changes on mobile
window.addEventListener('orientationchange', () => {
setTimeout(adjustForDevice, 500);
});

// Initialize
document.addEventListener('DOMContentLoaded', () => {
createParticles();
adjustForDevice();
});
</script>
</body>
</html>
